/mnt/phd/jihu/opioid/Code/risk_test.py:40: DtypeWarning: Columns (2) have mixed types. Specify dtype option on import or set low_memory=False.
  FULL = pd.read_csv(file_path, delimiter=",", dtype={'concurrent_MME': float,
Setting tag: _test_CV_first_countySutter
Stage: test, Scenario: CV, Max Points: 5, Max Features: 10, C0: None,        Intercept Upper Bound: None, Intercept Lower Bound: None, Balanced: False,            First: True, Upto180: False, Feature Set: None, Cutoff Set: None, Essential Num: None, No Drug: False,                No Insurance: False, County Name: Sutter, Setting Tag: _test_CV_first_countySutter
Start testing...
Start testing with LTOUR_6:
Intercept: -5

 - Condition: days_supply, Cutoff: 10, Score: 2
 - Condition: num_prior_prescriptions, Cutoff: 1, Score: 2
 - Condition: daily_dose, Cutoff: 90, Score: 1
 - Condition: HMFO, Cutoff: 1, Score: 1
 - Condition: long_acting, Cutoff: 1, Score: 1
 - Condition: prescriber_yr_avg_days_above75, Cutoff: 1, Score: 1
Setting tag: _LTOUR_6_countySutter_first

/export/storage_cures/CURES/Processed/FULL_OPIOID_2019_INPUT.csv imported with shape (6409165, 151)
Subsetting dataset to first prescription only with (3635072, 151) prescriptions.
Subsetting dataset to county Sutter with 10462 prescriptions.
Test reults are saved with setting tag: _LTOUR_6_countySutter_first_2019
Current working directory: /mnt/phd/jihu/opioid/Code
ROC information for riskSLIM saved to output/baseline/files/riskSLIM_roc_test_info_LTOUR_6_countySutter_first_2019.pkl, threshodls: [       inf 0.5        0.26894142 0.11920292 0.04742587 0.01798621
 0.00669285] with optimal threshold: 0.04742587317756678
Calibration information for riskSLIM saved to output/baseline/files/riskSLIM_calibration_test_info_LTOUR_6_countySutter_first_2019.pkl
Test done!

                   Value
Accuracy           0.865
Recall             0.807
Precision          0.191
ROC AUC            0.882
PR AUC             0.226
Calibration error  0.017
       Prob  Num_presc    TN  ...  Observed Risk  Num_patients  Num_longterm
0  0.006693       7660  7620  ...       0.005222          7660            56
1  0.017986       1154  1119  ...       0.030329          1154            45
2  0.047426        671     0  ...       0.080477           671            61
3  0.119203        869     0  ...       0.261220           869           247
4  0.268941         90     0  ...       0.277778            90            27
5  0.500000         18     0  ...       0.444444            18             9

[6 rows x 10 columns]

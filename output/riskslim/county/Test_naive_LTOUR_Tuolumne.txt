/mnt/phd/jihu/opioid/Code/risk_test.py:40: DtypeWarning: Columns (2) have mixed types. Specify dtype option on import or set low_memory=False.
  FULL = pd.read_csv(file_path, delimiter=",", dtype={'concurrent_MME': float,
Setting tag: _test_CV_first_countyTuolumne
Stage: test, Scenario: CV, Max Points: 5, Max Features: 10, C0: None,        Intercept Upper Bound: None, Intercept Lower Bound: None, Balanced: False,            First: True, Upto180: False, Feature Set: None, Cutoff Set: None, Essential Num: None, No Drug: False,                No Insurance: False, County Name: Tuolumne, Setting Tag: _test_CV_first_countyTuolumne
Start testing...
Start testing with LTOUR_6:
Intercept: -5

 - Condition: days_supply, Cutoff: 10, Score: 2
 - Condition: num_prior_prescriptions, Cutoff: 1, Score: 2
 - Condition: daily_dose, Cutoff: 90, Score: 1
 - Condition: HMFO, Cutoff: 1, Score: 1
 - Condition: long_acting, Cutoff: 1, Score: 1
 - Condition: prescriber_yr_avg_days_above75, Cutoff: 1, Score: 1
Setting tag: _LTOUR_6_countyTuolumne_first

/export/storage_cures/CURES/Processed/FULL_OPIOID_2019_INPUT.csv imported with shape (6409165, 151)
Subsetting dataset to first prescription only with (3635072, 151) prescriptions.
Subsetting dataset to county Tuolumne with 5294 prescriptions.
Test reults are saved with setting tag: _LTOUR_6_countyTuolumne_first_2019
Current working directory: /mnt/phd/jihu/opioid/Code
ROC information for riskSLIM saved to output/baseline/files/riskSLIM_roc_test_info_LTOUR_6_countyTuolumne_first_2019.pkl, threshodls: [       inf 0.5        0.26894142 0.11920292 0.04742587 0.01798621
 0.00669285] with optimal threshold: 0.04742587317756678
Calibration information for riskSLIM saved to output/baseline/files/riskSLIM_calibration_test_info_LTOUR_6_countyTuolumne_first_2019.pkl
Test done!

                   Value
Accuracy            0.86
Recall             0.825
Precision          0.275
ROC AUC            0.879
PR AUC             0.319
Calibration error  0.033
       Prob  Num_presc    TN  ...  Observed Risk  Num_patients  Num_longterm
0  0.006693       3799  3766  ...       0.008686          3799            46
1  0.017986        549   527  ...       0.040073           549            31
2  0.047426        307     0  ...       0.162866           307            52
3  0.119203        571     0  ...       0.295972           571           186
4  0.268941         44     0  ...       0.590909            44            26
5  0.500000         24     0  ...       0.625000            24            16

[6 rows x 10 columns]
